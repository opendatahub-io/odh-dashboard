{
  "test_id": "bff/testdata/llamastack-recordings/test.py::record",
  "request": {
    "method": "POST",
    "url": "https://generativelanguage.googleapis.com/v1beta/openai/v1/chat/completions",
    "headers": {},
    "body": {
      "model": "models/gemini-2.5-flash",
      "messages": [
        {
          "role": "user",
          "content": "What is machine learning?"
        },
        {
          "role": "assistant",
          "content": "",
          "tool_calls": [
            {
              "id": "function-call-10927184315993345131",
              "type": "function",
              "function": {
                "name": "knowledge_search",
                "arguments": "{\"query\":\"machine learning\"}"
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "function-call-10927184315993345131",
          "content": [
            {
              "type": "text",
              "text": "knowledge_search tool found 0 chunks:\nBEGIN of knowledge_search tool results.\n"
            },
            {
              "type": "text",
              "text": "END of knowledge_search tool results.\n"
            },
            {
              "type": "text",
              "text": "The above results were retrieved to help answer the user's query: \"machine learning\". Use them as supporting information only in answering this query. \n"
            }
          ]
        }
      ],
      "parallel_tool_calls": true,
      "stream": true,
      "stream_options": {
        "include_usage": true
      },
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "knowledge_search",
            "description": "Search for information in a database.",
            "parameters": {
              "type": "object",
              "properties": {
                "query": {
                  "type": "string",
                  "description": "The query to search for. Can be a natural language sentence or keywords."
                }
              },
              "required": [
                "query"
              ]
            }
          }
        }
      ]
    },
    "endpoint": "/v1/chat/completions",
    "model": "models/gemini-2.5-flash"
  },
  "response": {
    "body": [
      {
        "__type__": "openai.types.chat.chat_completion_chunk.ChatCompletionChunk",
        "__data__": {
          "id": "rec-2e4539415c84",
          "choices": [
            {
              "delta": {
                "content": "Machine learning is a field of artificial intelligence that focuses on enabling computer",
                "function_call": null,
                "refusal": null,
                "role": "assistant",
                "tool_calls": null
              },
              "finish_reason": null,
              "index": 0,
              "logprobs": null
            }
          ],
          "created": 0,
          "model": "models/gemini-2.5-flash",
          "object": "chat.completion.chunk",
          "service_tier": null,
          "system_fingerprint": null,
          "usage": {
            "completion_tokens": 13,
            "prompt_tokens": 153,
            "total_tokens": 216,
            "completion_tokens_details": null,
            "prompt_tokens_details": null
          }
        }
      },
      {
        "__type__": "openai.types.chat.chat_completion_chunk.ChatCompletionChunk",
        "__data__": {
          "id": "rec-2e4539415c84",
          "choices": [
            {
              "delta": {
                "content": " systems to learn from data without being explicitly programmed. It involves the development of algorithms that can analyze data, identify patterns, and make predictions or decisions based on those patterns. The core idea is to train a model on a dataset, allowing it to \"",
                "function_call": null,
                "refusal": null,
                "role": "assistant",
                "tool_calls": null
              },
              "finish_reason": null,
              "index": 0,
              "logprobs": null
            }
          ],
          "created": 0,
          "model": "models/gemini-2.5-flash",
          "object": "chat.completion.chunk",
          "service_tier": null,
          "system_fingerprint": null,
          "usage": {
            "completion_tokens": 63,
            "prompt_tokens": 153,
            "total_tokens": 266,
            "completion_tokens_details": null,
            "prompt_tokens_details": null
          }
        }
      },
      {
        "__type__": "openai.types.chat.chat_completion_chunk.ChatCompletionChunk",
        "__data__": {
          "id": "rec-2e4539415c84",
          "choices": [
            {
              "delta": {
                "content": "learn\" the underlying relationships and then apply that learned knowledge to new, unseen data.",
                "function_call": null,
                "refusal": null,
                "role": "assistant",
                "tool_calls": null
              },
              "finish_reason": "stop",
              "index": 0,
              "logprobs": null
            }
          ],
          "created": 0,
          "model": "models/gemini-2.5-flash",
          "object": "chat.completion.chunk",
          "service_tier": null,
          "system_fingerprint": null,
          "usage": {
            "completion_tokens": 80,
            "prompt_tokens": 153,
            "total_tokens": 283,
            "completion_tokens_details": null,
            "prompt_tokens_details": null
          }
        }
      }
    ],
    "is_streaming": true
  },
  "id_normalization_mapping": {}
}

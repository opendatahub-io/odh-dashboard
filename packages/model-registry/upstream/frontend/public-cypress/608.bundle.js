"use strict";(self.webpackChunkmodel_registry_ui=self.webpackChunkmodel_registry_ui||[]).push([[608],{5878:(e,t,r)=>{r.d(t,{CF:()=>f,Iu:()=>m,Jw:()=>c,Oi:()=>u,Sq:()=>p,Te:()=>h,Tn:()=>v,f:()=>d,pJ:()=>s,sq:()=>g,tU:()=>E,xV:()=>l});var o=r(57333),n=r(34067),a=r(35697),i=r(96529);const l=(e,t={})=>r=>(0,a.q)((0,n.xc)(e,`${i.fO}/api/${i.xg}/model_registry`,t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),s=e=>t=>(0,a.q)((0,n.xc)(e,`${i.fO}/api/${i.xg}/namespaces`,{},t)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),d=(e,t={})=>r=>(0,a.q)((0,n.xc)(e,`${i.fO}/api/${i.xg}/groups`,t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),c=(e,t={})=>r=>(0,a.q)((0,n.xc)(e,`${i.fO}/api/${i.xg}/settings/role_bindings`,t,r)).then(e=>{if((0,n.Q3)(e))return e.data.items;throw new Error("Invalid response format")}),m=(e,t={})=>(r,o)=>(0,a.q)((0,n.xc)(e,`${i.fO}/api/${i.xg}/settings/model_registry/${o}`,t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),u=(e,t={})=>r=>(0,a.q)((0,n.xc)(e,`${i.fO}/api/${i.xg}/settings/model_registry`,t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),p=(e,t={})=>(r,o)=>(0,a.q)((0,n.rs)(e,`${i.fO}/api/${i.xg}/settings/model_registry`,(0,n.xl)(o),t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),E=(e,t={})=>(r,o,l)=>(0,a.q)((0,n.Ql)(e,`${i.fO}/api/${i.xg}/settings/model_registry/${l}`,(0,n.xl)(o),t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),g=(e,t={})=>(r,o)=>(0,a.q)((0,n.rs)(e,`${i.fO}/api/${i.xg}/settings/role_bindings`,(0,n.xl)(o),t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),f=(e,t={})=>(r,o,l)=>(0,a.q)((0,n.n2)(e,`${i.fO}/api/${i.xg}/settings/role_bindings/${l}`,(0,n.xl)(o),t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),h=(e,t={})=>(r,o)=>(0,a.q)((0,n.Ql)(e,`${i.fO}/api/${i.xg}/settings/role_bindings/${o}`,{},t,r)).then(e=>{if((0,n.Q3)(e))return e.data;throw new Error("Invalid response format")}),v=(e,t,r,n,a,i,l)=>((e,t,r=!1)=>{if(!t)return e;const o=e.metadata?.ownerReferences||[];return t.metadata?.uid&&t.metadata.name&&!o.find(e=>e.uid===t.metadata?.uid)&&o.push({uid:t.metadata.uid,name:t.metadata.name,apiVersion:t.apiVersion,kind:t.kind,blockOwnerDeletion:r}),{...e,metadata:{...e.metadata,ownerReferences:o}}})({apiVersion:"rbac.authorization.k8s.io/v1",kind:"RoleBinding",metadata:{name:`dashboard-permissions-${(0,o.F)()}`,namespace:e,labels:i},roleRef:{apiGroup:"rbac.authorization.k8s.io",kind:a,name:n},subjects:[{apiGroup:"rbac.authorization.k8s.io",kind:t,name:r}]},l)},7179:(e,t,r)=>{r.d(t,{m:()=>a});var o=r(48348),n=r(98112);const a=()=>{const{apiState:e,refreshAPIState:t}=o.useContext(n.m);return{refreshAllAPI:t,...e}}},10385:(e,t,r)=>{r.d(t,{yQ:()=>i,Wp:()=>d,VU:()=>s,Yx:()=>a});var o,n=r(44352);!function(e){e.CATALOG="catalog",e.KFP="kfp"}(o||(o={}));const a=e=>e.modelSourceKind===o.CATALOG&&e.modelSourceClass&&e.modelSourceName?{sourceId:e.modelSourceClass,modelName:e.modelSourceName}:null,i=e=>({modelSourceKind:o.CATALOG,modelSourceName:e.modelName}),l={string_value:"",metadataType:n.u.STRING},s=e=>{const t=e?.tasks?.reduce((e,t)=>(e[t]=l,e),{});return{...t}},d=e=>{const t={};return e?(Object.keys(e).forEach(r=>{const o=e[r];(e=>e.metadataType===n.u.STRING&&""===e.string_value)(o)&&(t[r]=o)}),t):t}},11159:(e,t,r)=>{r.d(t,{Hr:()=>d,v0:()=>s});const o="To deploy this model, an administrator must first enable single-model serving in the cluster settings.",n="To enable model serving, an administrator must first select a model serving platform in the cluster settings.";var a;!function(e){e.S3ObjectStorage="S3 compatible object storage",e.URI="URI",e.OCI="OCI compliant registry"}(a||(a={}));const i={[a.S3ObjectStorage]:{name:a.S3ObjectStorage,resource:"s3",envVars:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY","AWS_S3_ENDPOINT","AWS_S3_BUCKET"],managedType:"s3"},[a.URI]:{name:a.URI,resource:"uri-v1",envVars:["URI"]},[a.OCI]:{name:a.OCI,resource:"oci-v1",envVars:[".dockerconfigjson","OCI_HOST"]}},l=e=>i[e].resource,s=e=>{const t=(e=>{if(!e)return null;try{const t=new URL(e);if(t.toString().startsWith("s3:")){const[e,...r]=[t.hostname,...t.pathname.split("/")].filter(Boolean),o=r.join("/"),n=new URLSearchParams(t.search),a=n.get("endpoint"),i=n.get("defaultRegion");return a&&e&&o?{s3Fields:{endpoint:a,bucket:e,region:i||void 0,path:o},uri:null,ociUri:null}:null}return e.startsWith("oci:")?{s3Fields:null,uri:null,ociUri:e}:{s3Fields:null,uri:e,ociUri:null}}catch{return null}})(e);return l(t?.uri?a.URI:t?.s3Fields?a.S3ObjectStorage:t?.ociUri?a.OCI:a.URI)},d=(e,t=!1)=>0===e.length?{enabled:!1,tooltip:n}:t&&!e.includes("kserve")?{enabled:!1,tooltip:o}:{enabled:!0}},11438:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(66241),n=r(48348),a=r.n(n);const i=({component:e,field:t,className:r})=>{const{isMUITheme:n}=(0,o.w)();return n?a().createElement("div",{className:r??"form-fieldset-wrapper"},e,a().createElement("fieldset",{"aria-hidden":"true",className:"form-fieldset"},t&&a().createElement("legend",{className:"form-fieldset-legend"},a().createElement("span",null,t)))):a().createElement(a().Fragment,null,e)}},11653:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(85130),n=r(48348),a=r.n(n),i=r(83617);const l=({timeSinceEpoch:e})=>{if(!e)return"--";const t=new Date(parseInt(e)).getTime();return Number.isNaN(t)?"--":a().createElement(o.Timestamp,{date:new Date(parseInt(e)),tooltip:{variant:o.TimestampTooltipVariant.default}},(0,i.K)(Date.now(),t))}},12895:(e,t,r)=>{r.d(t,{B:()=>n});var o=r(48348);const n=o.createContext({})},22931:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(48348),n=r(85130),a=r(66241),i=r(11438);const l=({value:e,onChange:t,onClear:r,fieldLabel:l,placeholder:s,isDisabled:d,className:c,style:m,"aria-label":u="Search","data-testid":p,onClick:E,...g})=>{const{isMUITheme:f}=(0,a.w)();return f?o.createElement(i.A,{className:c,field:l,component:o.createElement(n.TextInput,{value:e,type:"text",onChange:(e,r)=>t(r),isDisabled:d,"aria-label":u,"data-testid":p,style:m,onClick:E,placeholder:s})}):o.createElement(n.SearchInput,{...g,className:c,style:m,placeholder:s,value:e,isDisabled:d,"aria-label":u,"data-testid":p,onClick:E,onChange:(e,r)=>t(r),onClear:e=>{e.stopPropagation(),t(""),r?.()}})}},24195:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 focusable=%27false%27 aria-hidden=%27true%27 viewBox=%270 0 24 24%27 data-testid=%27ArrowDownwardIcon%27%3E%3Cpath d=%27M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z%27%3E%3C/path%3E%3C/svg%3E"},24828:(e,t,r)=>{r.d(t,{A:()=>E});var o=r(48348),n=r.n(o),a=r(85130),i=r(32105),l=r(2358),s=r(11640),d=r(11438),c=r(42559),m=r(77353),u=r(32853),p=r(41215);const E=({formData:e,setData:t,isFirstVersion:r,latestVersion:o,isCatalogModel:E})=>{const g=(0,u.wJ)(e.versionName),{versionName:f,versionDescription:h,sourceModelFormat:v,sourceModelFormatVersion:I,modelLocationType:R,modelLocationEndpoint:y,modelLocationBucket:S,modelLocationRegion:w,modelLocationPath:b,modelLocationURI:L}=e,T=n().createElement(a.TextInput,{isRequired:!0,type:"text",id:"version-name",name:"version-name",value:f,onChange:(e,r)=>t("versionName",r),validated:g?"default":"error"}),A=n().createElement(a.TextArea,{type:"text",id:"version-description",name:"version-description",value:h,onChange:(e,r)=>t("versionDescription",r)}),C=n().createElement(a.TextInput,{type:"text",placeholder:"Example, tensorflow",id:"source-model-format",name:"source-model-format",value:v,onChange:(e,r)=>t("sourceModelFormat",r)}),x=n().createElement(a.TextInput,{type:"text",placeholder:"Example, 1",id:"source-model-format-version",name:"source-model-format-version",value:I,onChange:(e,r)=>t("sourceModelFormatVersion",r)}),N=n().createElement(a.TextInput,{isRequired:!0,type:"text",id:"location-endpoint",name:"location-endpoint",value:y,onChange:(e,r)=>t("modelLocationEndpoint",r)}),M=n().createElement(a.TextInput,{isRequired:!0,type:"text",id:"location-bucket",name:"location-bucket",value:S,onChange:(e,r)=>t("modelLocationBucket",r)}),D=n().createElement(a.TextInput,{type:"text",id:"location-region",name:"location-region",value:w,onChange:(e,r)=>t("modelLocationRegion",r)}),O=n().createElement(a.TextInputGroup,null,n().createElement(a.TextInputGroupMain,{icon:"/",type:"text",id:"location-path",name:"location-path",value:b,onChange:(e,r)=>t("modelLocationPath",r)})),$=n().createElement(a.TextInput,{isRequired:!0,type:"text",id:"location-uri",name:"location-uri",value:L,onChange:(e,r)=>t("modelLocationURI",r),isDisabled:E}),F=(0,l.useExtensions)(c.c).map(e=>n().createElement(a.SplitItem,null,n().createElement(l.LazyCodeRefComponent,{component:e.properties.component,props:{modelLocationType:R,setData:t}})));return n().createElement(n().Fragment,null,n().createElement(s.A,{title:"Version details",description:r?"Provide model details that apply to every version of this model.":"Configure details for the version of this model."},n().createElement(a.FormGroup,{label:"Version name",isRequired:!0,fieldId:"version-name"},n().createElement(d.A,{component:T,field:"Version Name"}),n().createElement(a.FormHelperText,null,o&&n().createElement(a.HelperText,null,n().createElement(a.HelperTextItem,null,"Current version is ",o.name)),!g&&n().createElement(a.HelperText,null,n().createElement(a.HelperTextItem,{variant:"error"},"Cannot exceed ",p.k6," characters")))),n().createElement(a.FormGroup,{label:"Version description",fieldId:"version-description"},n().createElement(d.A,{component:A,field:"Version Description"})),n().createElement(a.FormGroup,{label:"Source model format",fieldId:"source-model-format"},n().createElement(d.A,{component:C,field:"Source Model Format"})),n().createElement(a.FormGroup,{label:"Source model format version",fieldId:"source-model-format-version"},n().createElement(d.A,{component:x,field:"Source Model Format Version"}))),n().createElement(s.A,{title:"Model location",description:"Specify the model location by providing either the object storage details or the URI."},n().createElement(a.Split,null,n().createElement(a.SplitItem,{isFilled:!0},n().createElement(a.Radio,{isChecked:R===m.Ht.ObjectStorage,name:"location-type-object-storage",isDisabled:E,onChange:()=>{t("modelLocationType",m.Ht.ObjectStorage)},label:"Object storage",id:"location-type-object-storage"})),R===m.Ht.ObjectStorage&&n().createElement(n().Fragment,null,F)),R===m.Ht.ObjectStorage&&n().createElement(n().Fragment,null,n().createElement(a.FormGroup,{className:i.A.mlLg,label:"Endpoint",isRequired:!0,fieldId:"location-endpoint"},n().createElement(d.A,{component:N,field:"Endpoint"})),n().createElement(a.FormGroup,{className:i.A.mlLg,label:"Bucket",isRequired:!0,fieldId:"location-bucket"},n().createElement(d.A,{component:M,field:"Bucket"})),n().createElement(a.FormGroup,{className:i.A.mlLg,label:"Region",fieldId:"location-region"},n().createElement(d.A,{component:D,field:"Region"})),n().createElement(a.FormGroup,{className:`location-path ${i.A.mlLg}`,label:"Path",isRequired:!0,fieldId:"location-path"},n().createElement(d.A,{component:O,field:"Path"}),n().createElement(a.HelperText,null,n().createElement(a.HelperTextItem,null,"Enter a path to a model or folder. This path cannot point to a root folder.")))),n().createElement(a.Split,null,n().createElement(a.SplitItem,{isFilled:!0},n().createElement(a.Radio,{isChecked:R===m.Ht.URI,name:"location-type-uri",onChange:()=>{t("modelLocationType",m.Ht.URI)},label:"URI",id:"location-type-uri"})),R===m.Ht.URI&&!E&&n().createElement(n().Fragment,null,F)),R===m.Ht.URI&&(E?e.modelLocationURI:n().createElement(a.FormGroup,{className:i.A.mlLg,label:"URI",isRequired:!0,fieldId:"location-uri"},n().createElement(d.A,{component:$,field:"URI"})))))}},30620:(e,t,r)=>{r.d(t,{Dh:()=>i,FV:()=>s,IV:()=>a,KG:()=>p,P3:()=>u,PN:()=>c,U8:()=>E,g7:()=>g,ht:()=>m,oY:()=>l});var o=r(44352),n=(r(96529),r(63852));const a=e=>Object.keys(e).filter(t=>{const r=e[t];return r.metadataType===o.u.STRING&&""===r.string_value}),i=(e,t)=>{const r=a(e),n=t.filter(e=>!r.includes(e)),i=r.filter(e=>!t.includes(e)),l={...e};return i.forEach(e=>{delete l[e]}),n.forEach(e=>{l[e]={string_value:"",metadataType:o.u.STRING}}),l},l=e=>Object.keys(e).reduce((t,r)=>{if("_lastModified"===r||/^_registeredFrom/.test(r))return t;const n=e[r];return n.metadataType===o.u.STRING&&""!==n.string_value?{...t,[r]:n}:t},{}),s=e=>{const{op:t}=e,r={...e.customProperties};if(("delete"===t||"update"===t&&e.oldKey!==e.newPair.key)&&delete r[e.oldKey],"create"===t||"update"===t){const{key:t,value:n}=e.newPair;r[t]={string_value:n,metadataType:o.u.STRING}}return r},d=(e,t)=>e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||a(e.customProperties).some(e=>e.toLowerCase().includes(t)),c=(e,t)=>{const r=t.Keyword?.toLowerCase(),o=t.Author?.toLowerCase();return e.filter(e=>{if(!r&&!o)return!0;return!(r&&!d(e,r))&&(!o||e.author?.toLowerCase().includes(o))})},m=e=>e.toSorted((e,t)=>{const r=parseInt(e.createTimeSinceEpoch),o=parseInt(t.createTimeSinceEpoch);return new Date(o).getTime()-new Date(r).getTime()}),u=(e,t,r)=>{const o=r.Keyword?.toLowerCase(),n=r.Owner?.toLowerCase();return e.filter(e=>{if(!o&&!n)return!0;const r=t.filter(t=>t.registeredModelId===e.id),i=o&&!(e.name.toLowerCase().includes(o)||e.description&&e.description.toLowerCase().includes(o)||a(e.customProperties).some(e=>e.toLowerCase().includes(o))),l=o&&!r.some(e=>d(e,o));return(!i||!l)&&(!n||e.owner?.toLowerCase().includes(n))})},p=e=>e.serverAddress||"",E=e=>{try{const t=new URL(e),r="http:"===t.protocol||"https:"===t.protocol;return r&&/^(?!-)[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*\.[A-Za-z]{2,}$/.test(t.hostname)}catch{return!1}},g=(e,t)=>{const r=e.filter(e=>e.registeredModelId===t);return(0,n._N)(r)}},32853:(e,t,r)=>{r.d(t,{$R:()=>l,Gs:()=>m,KO:()=>s,S4:()=>u,fB:()=>c,oV:()=>E,wJ:()=>p});var o=r(44352),n=r(63852),a=r(77353),i=r(41215);const l=async(e,t,r)=>{let n;const a={};try{n=await e.api.createRegisteredModel({},{name:t.modelName,description:t.modelDescription,customProperties:t.modelCustomProperties||{},owner:r,state:o.ve.LIVE})}catch(e){return e instanceof Error&&(a[i.EY.REGISTERED_MODEL]=e),{data:{registeredModel:n},errors:a}}const{data:{modelVersion:l,modelArtifact:d},errors:c}=await s(e,n,t,r,!0);return{data:{registeredModel:n,modelVersion:l,modelArtifact:d},errors:c}},s=async(e,t,r,l,s)=>{let d,c;const m={};try{d=await e.api.createModelVersionForRegisteredModel({},t.id,{name:r.versionName,description:r.versionDescription,customProperties:r.versionCustomProperties||{},state:o.ve.LIVE,author:l,registeredModelId:t.id},t,s)}catch(e){return e instanceof Error&&(m[i.EY.MODEL_VERSION]=e),{data:{modelVersion:d,modelArtifact:c},errors:m}}try{c=await e.api.createModelArtifactForModelVersion({},d.id,{name:`${r.versionName}`,description:r.versionDescription,customProperties:{},state:o.DJ.LIVE,author:l,modelFormatName:r.sourceModelFormat,modelFormatVersion:r.sourceModelFormatVersion,...r.additionalArtifactProperties,uri:r.modelLocationType===a.Ht.ObjectStorage?(0,n.xR)({endpoint:r.modelLocationEndpoint,bucket:r.modelLocationBucket,region:r.modelLocationRegion,path:r.modelLocationPath})||"":r.modelLocationURI,artifactType:"model-artifact"})}catch(e){e instanceof Error&&(m[i.EY.MODEL_ARTIFACT]=e)}return{data:{modelVersion:d,modelArtifact:c},errors:m}},d=e=>{const{versionName:t,modelLocationType:r,modelLocationURI:o,modelLocationBucket:n,modelLocationEndpoint:i,modelLocationPath:l}=e;return!(t&&(r!==a.Ht.URI||o)&&(r!==a.Ht.ObjectStorage||n&&i&&l)&&p(t))},c=(e,t)=>!e.modelName||d(e)||!p(e.modelName)||E(e.modelName,t),m=e=>!e.registeredModelId||d(e),u=(e,t)=>c(e,t)||!e.modelRegistry,p=e=>e.length<=i.k6,E=(e,t)=>t.items.some(t=>t.name===e)},41215:(e,t,r)=>{r.d(t,{EY:()=>a,Fu:()=>n,k6:()=>o});const o=128;var n,a;!function(e){e.REGISTER_MODEL="Register model",e.REGISTER_VERSION="Register new version"}(n||(n={})),function(e){e.REGISTERED_MODEL="registeredModel",e.MODEL_VERSION="modelVersion",e.MODEL_ARTIFACT="modelArtifact"}(a||(a={}))},42559:(e,t,r)=>{r.d(t,{c:()=>o});const o=e=>"model-registry.register/autofill-connection"===e.type},44352:(e,t,r)=>{var o,n,a;r.d(t,{DJ:()=>n,u:()=>a,ve:()=>o}),function(e){e.LIVE="LIVE",e.ARCHIVED="ARCHIVED"}(o||(o={})),function(e){e.UNKNOWN="UNKNOWN",e.PENDING="PENDING",e.LIVE="LIVE",e.MARKED_FOR_DELETION="MARKED_FOR_DELETION",e.DELETED="DELETED",e.ABANDONED="ABANDONED",e.REFERENCE="REFERENCE"}(n||(n={})),function(e){e.INT="MetadataIntValue",e.DOUBLE="MetadataDoubleValue",e.STRING="MetadataStringValue",e.STRUCT="MetadataStructValue",e.PROTO="MetadataProtoValue",e.BOOL="MetadataBoolValue"}(a||(a={}))},46103:(e,t,r)=>{r.d(t,{C3:()=>o,Ko:()=>n,Pc:()=>a,RM:()=>g,TR:()=>u,Tj:()=>f,Vd:()=>l,Zf:()=>p,fY:()=>s,j:()=>h,j1:()=>i,lh:()=>c,mH:()=>E,rq:()=>d,xi:()=>m});const o=(e="")=>`/model-registry/${e}`,n=e=>`${o(e)}/registeredModels`,a=(e="",t)=>`${n(t)}/${e}`,i=e=>`${n(e)}/archive`,l=(e="",t)=>`${i(t)}/${e}`,s=(e,t)=>`${a(e,t)}/versions`,d=(e,t)=>`${l(e,t)}/versions`,c=(e,t,r)=>`${s(t,r)}/${e}`,m=(e,t)=>`${s(e,t)}/archive`,u=(e,t,r)=>`${d(t,r)}/${e}`,p=(e,t,r)=>`${m(t,r)}/${e}`,E=e=>`${o(e)}/registerModel`,g=e=>`${o(e)}/registerVersion`,f=(e,t)=>`${a(e,t)}/registerVersion`,h=(e,t,r)=>`${c(e,t,r)}/deployments`},46268:(e,t,r)=>{r.d(t,{Lm:()=>o,Ny:()=>n,hm:()=>a,nG:()=>i});const o=e=>{const t=e.indexOf("/");return-1===t?e:e.slice(t+1)},n=e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e,decodeURIComponent(t)])),a=e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e,encodeURIComponent(t).replace(/\./g,"%252E")])),i=e=>{if(!e)return null;const t=e.items.filter(e=>!1!==e.enabled);return{...e,items:t,size:t.length}}},60822:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(48348),n=r.n(o),a=r(85130),i=r(41215);const l=({submitLabel:e,submitError:t,registrationErrorType:r,versionName:o="",modelName:l=""})=>{const[s,d]=n().useState(!0);return e===i.Fu.REGISTER_MODEL&&r===i.EY.MODEL_VERSION?n().createElement(n().Fragment,null,s&&n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"success",title:`${l} model registered`,actionClose:n().createElement(a.AlertActionCloseButton,{onClose:()=>d(!1)})})),n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"danger",title:`Failed to register ${o} version`},t.message))):e===i.Fu.REGISTER_VERSION&&r===i.EY.MODEL_VERSION?n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"danger",title:`Failed to register ${o} version`},t.message)):e===i.Fu.REGISTER_MODEL&&r===i.EY.MODEL_ARTIFACT?n().createElement(n().Fragment,null,s&&n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"success",title:`${l} model and ${o} version registered`,actionClose:n().createElement(a.AlertActionCloseButton,{onClose:()=>d(!1)})})),n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"danger",title:`Failed to create artifact for ${o} version`},t.message))):e===i.Fu.REGISTER_VERSION&&r===i.EY.MODEL_ARTIFACT?n().createElement(n().Fragment,null,s&&n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"success",title:`${o} version registered`,actionClose:n().createElement(a.AlertActionCloseButton,{onClose:()=>d(!1)})})),n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"danger",title:`Failed to create artifact for ${o} version`},t.message))):n().createElement(a.StackItem,null,n().createElement(a.Alert,{isInline:!0,variant:"danger",title:`Failed to register ${l} model`},t.message))},s=({submitLabel:e,submitError:t,isSubmitDisabled:r,isSubmitting:o,onSubmit:i,onCancel:s,registrationErrorType:d,versionName:c,modelName:m})=>n().createElement(a.PageSection,{hasBodyWrapper:!1,stickyOnBreakpoint:{default:"bottom"}},n().createElement(a.Stack,{hasGutter:!0},t&&n().createElement(l,{submitLabel:e,submitError:t,registrationErrorType:d,versionName:c,modelName:m}),n().createElement(a.StackItem,null,n().createElement(a.ActionList,null,n().createElement(a.ActionListGroup,null,n().createElement(a.ActionListItem,null,n().createElement(a.Button,{isDisabled:r,variant:"primary",id:"create-button","data-testid":"create-button",isLoading:o,onClick:i},e)),n().createElement(a.ActionListItem,null,n().createElement(a.Button,{isDisabled:o,variant:"link",id:"cancel-button",onClick:s},"Cancel")))))))},63852:(e,t,r)=>{r.d(t,{BT:()=>c,It:()=>a,SD:()=>l,_N:()=>i,_u:()=>s,dI:()=>d,xR:()=>n});var o=r(44352);const n=e=>{const{endpoint:t,bucket:r,region:o,path:n}=e;if(!t||!r||!n)return null;const a=new URLSearchParams;return a.set("endpoint",t),o&&a.set("defaultRegion",o),`s3://${r}/${n}?${a.toString()}`},a=e=>{try{const t=new URL(e);if(t.toString().startsWith("s3:")){const[e,...r]=[t.hostname,...t.pathname.split("/")].filter(Boolean),o=r.join("/"),n=new URLSearchParams(t.search),a=n.get("endpoint"),i=n.get("defaultRegion");return a&&e&&o?{s3Fields:{endpoint:a,bucket:e,region:i||void 0,path:o},uri:null,ociUri:null}:null}return e.startsWith("oci:")?{s3Fields:null,uri:null,ociUri:e}:{s3Fields:null,uri:e,ociUri:null}}catch{return null}},i=e=>e?.toSorted(({createTimeSinceEpoch:e},{createTimeSinceEpoch:t})=>e&&t?Number(t)-Number(e):0)[0],l=e=>e.filter(e=>e.state===o.ve.ARCHIVED),s=e=>e.filter(e=>e.state===o.ve.LIVE),d=e=>e.filter(e=>e.state===o.ve.ARCHIVED),c=e=>e.filter(e=>e.state===o.ve.LIVE)},68591:(e,t,r)=>{r.d(t,{j:()=>d,E:()=>c});var o=r(48348),n=r(3670),a=r(32598),i=r(9226),l=r(5878);const s=e=>{const t=(0,a.r)(e),r=o.useMemo(()=>(0,l.xV)("",t),[t]),n=o.useCallback(e=>r(e),[r]);return(0,i.vT)(n,[],{initialPromisePurity:!0})},d=o.createContext({modelRegistriesLoaded:!1,modelRegistriesLoadError:void 0,modelRegistries:[],preferredModelRegistry:void 0,updatePreferredModelRegistry:()=>{}}),c=({children:e,...t})=>o.createElement(m,{...t},e),m=({children:e})=>{const t=(0,n.f)(),[r,a,i]=s(t),[l,c]=o.useState(void 0),m=r.length>0?r[0]:null,u=o.useMemo(()=>({modelRegistriesLoaded:a,modelRegistriesLoadError:i,modelRegistries:r,preferredModelRegistry:l??m??void 0,updatePreferredModelRegistry:c}),[a,i,r,l,m]);return o.createElement(d.Provider,{value:u},e)}},69327:(e,t,r)=>{r.d(t,{S:()=>n});var o=r(46268);const n=e=>{const{sourceId:t="",modelName:r=""}=(0,o.hm)({sourceId:e.sourceId,modelName:e.modelName});return`/model-catalog/${t}/${r}`||"#"}},77353:(e,t,r)=>{r.d(t,{Bc:()=>m,CN:()=>d,Ht:()=>o,vO:()=>c});var o,n=r(45728);!function(e){e.ObjectStorage="Object storage",e.URI="URI"}(o||(o={}));const a={versionName:"",versionDescription:"",sourceModelFormat:"",sourceModelFormatVersion:"",modelLocationType:o.ObjectStorage,modelLocationEndpoint:"",modelLocationBucket:"",modelLocationRegion:"",modelLocationPath:"",modelLocationURI:"",modelCustomProperties:{},versionCustomProperties:{}},i={...a,modelName:"",modelDescription:""},l={...a,registeredModelId:""},s={...i,modelRegistry:""},d=()=>(0,n.A)(i),c=e=>(0,n.A)({...l,registeredModelId:e||""}),m=e=>(0,n.A)({...s,...e})},83262:(e,t,r)=>{r.d(t,{A:()=>h});var o=r(48348),n=r(85130),a=r(29653),i=r(4935),l=r(93598),s=r(29962),d=r(45848),c=r(94210),m=r(66729),u=r(55188),p=r(19398),E=r(66241),g=r(68591),f=r(30620);const h=({modelRegistry:e,onSelection:t,primary:r,isFullWidth:h,hasError:v})=>{const{modelRegistries:I,updatePreferredModelRegistry:R}=o.useContext(g.j),{isMUITheme:y}=(0,E.w)(),S=I.find(t=>t.name===e),[w,b]=(0,p.$)("kubeflow.dashboard.model.registry.favorite",[]),L=S?S.displayName:e,T=0===I.length?"No model registries":L,A=e=>{const t=e.description||"";if(!t)return;const r=o.createElement(n.DescriptionList,null,o.createElement(n.DescriptionListGroup,null,o.createElement(n.DescriptionListTerm,null,`${e.displayName} description`),o.createElement(n.DescriptionListDescription,null,t)));return o.createElement(n.Tooltip,{content:r,isContentLeftAligned:!0},o.createElement("span",{className:i.A.truncate},o.createElement("span",{className:i.A.truncateStart},t)))},C=I.map(e=>({key:e.name,label:e.name,dropdownLabel:e.displayName,description:A(e),isFavorited:w.includes(e.name)})),x=o.createElement(m.A,{isScrollable:!0,placeholder:"Select a model registry",dataTestId:"model-registry-selector-dropdown",toggleProps:{id:"download-steps-logs-toggle",status:v?"danger":void 0},toggleLabel:T,"aria-label":"Model registry toggle",previewDescription:!1,onChange:e=>{R(I.find(t=>t.name===e)),t(e)},isFullWidth:h,maxMenuHeight:"300px",popperProps:{maxWidth:"400px"},value:S?.name,groupedOptions:[...w.length>0?[{key:"favorites-group",label:"Favorites",options:(N=w,C.filter(e=>N.includes(e.key)))}]:[],{key:"all",label:"All model registries",options:C}],onActionClick:(e,t,r)=>{if(e.stopPropagation(),"fav"===r){const e=w.includes(t);b(e?w.filter(e=>e!==t):[...w,t])}}});var N;return r?x:o.createElement(n.Flex,{spaceItems:{default:"spaceItemsSm"},alignItems:{default:"alignItemsCenter"}},o.createElement(n.FlexItem,null,o.createElement(n.Icon,null,o.createElement(l.Jq,null))),o.createElement(n.FlexItem,null,o.createElement(n.Bullseye,null,"Model registry")),o.createElement(n.FlexItem,null,x),S&&o.createElement(n.FlexItem,null,o.createElement(n.Popover,{"aria-label":"Model registry description popover","data-testid":"mr-details-popover",position:"right",headerContent:`${S.displayName} details`,bodyContent:o.createElement(n.DescriptionList,null,o.createElement(n.DescriptionListGroup,null,o.createElement(n.DescriptionListTerm,null,"Description"),o.createElement(n.DescriptionListDescription,{className:S.description?"":a.A.textColorDisabled},S.description||"No description")),o.createElement(n.DescriptionListGroup,null,o.createElement(n.DescriptionListTerm,null,"Server URL"),o.createElement(n.DescriptionListDescription,null,o.createElement(d.A,{textToCopy:`https://${(0,f.KG)(S)}`}))))},o.createElement(n.Button,{variant:"link",icon:o.createElement(s.ee,null),"data-testid":"view-details-button"},"View details"))),o.createElement(n.FlexItem,{align:{default:"alignRight"}},y?o.createElement(c.A,{buttonLabel:"Need another registry?",linkTestId:"model-registry-help-button"}):o.createElement(u.A,{buttonLabel:"Need another registry?",headerContent:"Need another registry?",leadText:"To request access to a new or existing model registry, contact your administrator.",contentTestId:"model-registry-help-content",linkTestId:"model-registry-help-button",popoverPosition:n.PopoverPosition.left})))}},87731:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(85130),n=r(48348),a=r.n(n),i=r(11640),l=r(11438),s=r(41215);const d=({formData:e,setData:t,hasModelNameError:r,isModelNameDuplicate:n})=>{const d=a().createElement(o.TextInput,{isRequired:!0,type:"text",id:"model-name",name:"model-name",value:e.modelName,onChange:(e,r)=>t("modelName",r),validated:r?"error":"default"}),c=a().createElement(o.TextArea,{type:"text",id:"model-description",name:"model-description",value:e.modelDescription,onChange:(e,r)=>t("modelDescription",r)});return a().createElement(i.A,{title:"Model details",description:"Provide model details that apply to every version of this model."},a().createElement(o.FormGroup,{label:"Model name",isRequired:!0,fieldId:"model-name"},a().createElement(l.A,{component:d,field:"model-name"}),r&&a().createElement(o.FormHelperText,null,a().createElement(o.HelperText,null,a().createElement(o.HelperTextItem,{variant:"error","data-testid":"model-name-error"},n?"Model name already exists":`Cannot exceed ${s.k6} characters`)))),a().createElement(o.FormGroup,{label:"Model description",fieldId:"model-description"},a().createElement(l.A,{component:c,field:"Model Description"}),a().createElement(o.FormHelperText,null,a().createElement(o.HelperText,null,a().createElement(o.HelperTextItem,null,"Enter a brief summary of the model's key details.")))))}},96492:(e,t,r)=>{r.d(t,{N$:()=>i,Us:()=>a});var o=r(44352);const n=async(e,t)=>{if(!t.id)throw new Error("Model version ID is required");try{const r=(new Date).toISOString();await e.patchModelVersion({},{state:o.ve.LIVE,customProperties:{...t.customProperties,_lastModified:{metadataType:o.u.STRING,string_value:r}}},t.id)}catch(e){throw new Error(`Failed to update model version timestamp: ${e instanceof Error?e.message:String(e)}`)}},a=async(e,t)=>{if(!t.id)throw new Error("Registered model ID is required");try{const r=(new Date).toISOString();await e.patchRegisteredModel({},{state:o.ve.LIVE,customProperties:{...t.customProperties,_lastModified:{metadataType:o.u.STRING,string_value:r}}},t.id)}catch(e){throw new Error(`Failed to update registered model timestamp: ${e instanceof Error?e.message:String(e)}`)}},i=async(e,t,r)=>{await Promise.all([n(e,r),a(e,t)])}},98112:(e,t,r)=>{r.d(t,{m:()=>L,T:()=>T});var o=r(48348),n=r.n(o),a=r(3670),i=r(41454),l=r(35697),s=r(34067),d=r(96492);const c=(e,t={})=>(r,o)=>(0,l.q)((0,s.rs)(e,"/registered_models",(0,s.xl)(o),t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),m=(e,t={})=>(r,o,n,a,i)=>(0,l.q)((0,s.rs)(e,`/registered_models/${o}/versions`,(0,s.xl)(n),t,r)).then(r=>{if((0,s.Q3)(r)){const o=r.data;return i?o:(0,d.Us)({patchRegisteredModel:R(e,t)},a).then(()=>o)}throw new Error("Invalid response format")}),u=(e,t={})=>(r,o,n)=>(0,l.q)((0,s.rs)(e,`/model_versions/${o}/artifacts`,(0,s.xl)(n),t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),p=(e,t={})=>(r,o)=>(0,l.q)((0,s.xc)(e,`/registered_models/${o}`,t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),E=(e,t={})=>(r,o)=>(0,l.q)((0,s.xc)(e,`/model_versions/${o}`,t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),g=(e,t={})=>r=>(0,l.q)((0,s.xc)(e,"/model_artifacts",t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),f=(e,t={})=>r=>(0,l.q)((0,s.xc)(e,"/model_versions",t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),h=(e,t={})=>r=>(0,l.q)((0,s.xc)(e,"/registered_models",t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),v=(e,t={})=>(r,o)=>(0,l.q)((0,s.xc)(e,`/registered_models/${o}/versions`,t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),I=(e,t={})=>(r,o)=>(0,l.q)((0,s.xc)(e,`/model_versions/${o}/artifacts`,t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),R=(e,t={})=>(r,o,n)=>(0,l.q)((0,s.n2)(e,`/registered_models/${n}`,(0,s.xl)(o),t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),y=(e,t={})=>(r,o,n)=>(0,l.q)((0,s.n2)(e,`/model_versions/${n}`,(0,s.xl)(o),t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),S=(e,t={})=>(r,o,n)=>(0,l.q)((0,s.n2)(e,`/model_artifacts/${n}`,(0,s.xl)(o),t,r)).then(e=>{if((0,s.Q3)(e))return e.data;throw new Error("Invalid response format")}),w=(e,t)=>{const r=n().useCallback(e=>({createRegisteredModel:c(e,t),createModelVersionForRegisteredModel:m(e,t),createModelArtifactForModelVersion:u(e,t),getRegisteredModel:p(e,t),getModelVersion:E(e,t),listModelArtifacts:g(e,t),listModelVersions:f(e,t),listRegisteredModels:h(e,t),getModelVersionsByRegisteredModel:v(e,t),getModelArtifactsByModelVersion:I(e,t),patchRegisteredModel:R(e,t),patchModelVersion:y(e,t),patchModelArtifact:S(e,t)}),[t]);return(0,i.d)(e,r)};var b=r(96529);const L=o.createContext({apiState:{apiAvailable:!1,api:null},refreshAPIState:()=>{}}),T=({children:e,modelRegistryName:t})=>{const r=t?`${b.fO}/api/${b.xg}/model_registry/${t}`:null,n=(0,a.f)(),[i,l]=w(r,n);return o.createElement(L.Provider,{value:o.useMemo(()=>({apiState:i,refreshAPIState:l}),[i,l])},e)}},98547:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(48348),n=r(9226),a=r(7179);const i=()=>{const{api:e,apiAvailable:t}=(0,a.m)(),r=o.useCallback(r=>t?e.listRegisteredModels(r):Promise.reject(new Error("API not yet available")),[e,t]);return(0,n.vT)(r,{items:[],size:0,pageSize:0,nextPageToken:""},{initialPromisePurity:!0})}}}]);
//# sourceMappingURL=608.bundle.js.map
"use strict";(self.webpackChunkmodel_registry_ui=self.webpackChunkmodel_registry_ui||[]).push([[180],{61026:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(71354),n=a.n(r),l=a(76314),o=a.n(l)()(n());o.push([e.id,".markdown-content p{margin-bottom:var(--pf-t--global--spacer--md)}.markdown-content ul,.markdown-content ol{margin:var(--pf-t--global--spacer--md) 0}.markdown-content li{margin-bottom:var(--pf-t--global--spacer--sm)}.markdown-content blockquote{margin:var(--pf-t--global--spacer--md) 0;padding:0 var(--pf-t--global--spacer--md)}.markdown-content blockquote p{margin:0}.markdown-content pre{margin:var(--pf-t--global--spacer--sm) 0;padding:var(--pf-t--global--spacer--sm);background-color:var(--pf-t--global--background--color--secondary--default);overflow-x:auto}.markdown-content pre code{font-family:var(--pf-t--global--font--family--mono);font-size:var(--pf-t--global--font--size--body--sm);white-space:pre-wrap}.markdown-content img{display:block;margin:var(--pf-t--global--spacer--md) auto;max-width:100%;height:auto}","",{version:3,sources:["webpack://./src/app/shared/markdown/MarkdownComponent.scss"],names:[],mappings:"AAEE,oBACE,6CAAA,CAIF,0CAEE,wCAAA,CAGF,qBACE,6CAAA,CAIF,6BACE,wCAAA,CACA,yCAAA,CAEA,+BACE,QAAA,CAKJ,sBACE,wCAAA,CACA,uCAAA,CACA,2EAAA,CACA,eAAA,CAEA,2BACE,mDAAA,CACA,mDAAA,CACA,oBAAA,CAKJ,sBACE,aAAA,CACA,2CAAA,CACA,cAAA,CACA,WAAA",sourcesContent:[".markdown-content {\n  // Paragraphs\n  p {\n    margin-bottom: var(--pf-t--global--spacer--md);\n  }\n\n  // Lists\n  ul,\n  ol {\n    margin: var(--pf-t--global--spacer--md) 0;\n  }\n\n  li {\n    margin-bottom: var(--pf-t--global--spacer--sm);\n  }\n\n  // Blockquotes\n  blockquote {\n    margin: var(--pf-t--global--spacer--md) 0;\n    padding: 0 var(--pf-t--global--spacer--md);\n\n    p {\n      margin: 0;\n    }\n  }\n\n  // Code blocks\n  pre {\n    margin: var(--pf-t--global--spacer--sm) 0;\n    padding: var(--pf-t--global--spacer--sm);\n    background-color: var(--pf-t--global--background--color--secondary--default);\n    overflow-x: auto;\n\n    code {\n      font-family: var(--pf-t--global--font--family--mono);\n      font-size: var(--pf-t--global--font--size--body--sm);\n      white-space: pre-wrap;\n    }\n  }\n\n  // Images\n  img {\n    display: block;\n    margin: var(--pf-t--global--spacer--md) auto;\n    max-width: 100%;\n    height: auto;\n  }\n}\n"],sourceRoot:""}]);const i=o},92314:(e,t,a)=>{a.d(t,{s:()=>r});const r=e=>"model-catalog.model-details/deploy-modal"===e.type},93180:(e,t,a)=>{a.d(t,{A:()=>nt});var r=a(48348),n=a.n(r),l=a(54557),o=a(3670),i=a(9226);var c=a(41454),s=a(35697),m=a(34067);const d=(e,t={})=>(a,r,n,l)=>{const o={source:r,...n,...l&&{q:l},...t};return(0,s.q)((0,m.xc)(e,"/models",o,a)).then(e=>{if((0,m.Q3)(e))return e.data;throw new Error("Invalid response format")})},u=(e,t={})=>a=>(0,s.q)((0,m.xc)(e,"/sources",t,a)).then(e=>{if((0,m.Q3)(e))return e.data;throw new Error("Invalid response format")}),p=(e,t={})=>(a,r,n)=>(0,s.q)((0,m.xc)(e,`/sources/${r}/models/${n}`,t,a)).then(e=>{if((0,m.Q3)(e))return e.data;throw new Error("Invalid response format")}),g=(e,t={})=>(a,r,n)=>(0,s.q)((0,m.xc)(e,`/sources/${r}/artifacts/${n}`,t,a)).then(e=>{if((0,m.Q3)(e))return e.data;throw new Error("Invalid response format")}),E=(e,t)=>{const a=n().useCallback(e=>({getCatalogModelsBySource:d(e,t),getListSources:u(e,t),getCatalogModel:p(e,t),getListCatalogModelArtifacts:g(e,t)}),[t]);return(0,c.d)(e,a)};var h=a(96529);const C=r.createContext({catalogSourcesLoaded:!1,catalogSourcesLoadError:void 0,catalogSources:null,selectedSource:void 0,updateSelectedSource:()=>{},apiState:{apiAvailable:!1,api:null},refreshAPIState:()=>{}}),A=({children:e})=>{const t=`${h.fO}/api/${h.xg}/model_catalog`,a=(0,o.f)(),[l,c]=E(t,a),[s,m,d]=(e=>{const t=n().useCallback(t=>e.apiAvailable?e.api.getListSources(t):Promise.reject(new Error("API not yet available")),[e]);return(0,i.vT)(t,{items:[],size:0,pageSize:0,nextPageToken:""},{initialPromisePurity:!0})})(l),[u,p]=r.useState(void 0),g=r.useMemo(()=>({catalogSourcesLoaded:m,catalogSourcesLoadError:d,catalogSources:s,selectedSource:u??void 0,updateSelectedSource:p,apiState:l,refreshAPIState:c}),[m,d,s,u,l,c]);return r.createElement(C.Provider,{value:g},e)};var b=a(69327);const v=(e="")=>`/model-catalog/${e}`;var y=a(85130),f=a(66241),S=a(79438),k=a(25538),I=a(65389),L=a(94210),P=a(55188),w=a(56862);const T=({testid:e,title:t,description:a,headerIcon:r,children:l,customAction:o})=>n().createElement(y.EmptyState,{icon:r??w.GY,titleText:t,variant:y.EmptyStateVariant.sm,"data-testid":e},n().createElement(y.EmptyStateBody,null,a),l,n().createElement(y.EmptyStateFooter,null,o&&n().createElement(y.EmptyStateActions,null,o)));var N=a(28659),x=a(46268),R=a(62913),M=a(86161),D=a(22931);const B=({sourceId:e,onSelection:t,searchTerm:a,onSearch:r,onClearSearch:l,primary:o})=>{const[i,c]=n().useState(!1),[s,m]=n().useState(a||""),{catalogSources:d,updateSelectedSource:u,selectedSource:p}=n().useContext(C),g=d?.items.find(t=>t.id===e),{isMUITheme:E}=(0,f.w)(),h=(0,x.nG)(d),A=n().createElement(y.Dropdown,{shouldFocusToggleOnSelect:!0,toggle:e=>n().createElement(y.MenuToggle,{"data-testid":"source-selector",id:"source-selector-toggle-button",ref:e,"aria-label":"Filter source",onClick:()=>c(!i),isExpanded:i,icon:n().createElement(R.YG,null)},g?.name),isOpen:i,popperProps:{appendTo:"inline"}},n().createElement(y.DropdownList,null,h?.items.map(e=>n().createElement(y.DropdownItem,{isSelected:e.id===p?.id,key:e.id,id:e.id,onClick:()=>{c(!1);const a=h.items.find(t=>t.id===e.id);u(a),t(e.id)}},e.name))));return o?A:n().createElement(y.Toolbar,null,n().createElement(y.ToolbarContent,null,n().createElement(y.Flex,null,n().createElement(y.ToolbarToggleGroup,{breakpoint:"md",toggleIcon:n().createElement(R.YG,null)},n().createElement(y.ToolbarGroup,{variant:"filter-group",gap:{default:"gapMd"},alignItems:"center"},n().createElement(y.ToolbarItem,null,A),n().createElement(y.ToolbarItem,null,n().createElement(D.A,{fieldLabel:"Filter by name, description and provider","aria-label":"Search with submit button",className:"toolbar-fieldset-wrapper",placeholder:"Filter by name, description and provider",value:s,style:{minWidth:"400px"},onChange:e=>{m(e)},onSearch:(e,t)=>{r&&r(t.trim())},onClear:()=>{m(""),l&&l()},onClick:()=>c(!1)})),n().createElement(y.ToolbarItem,null,E&&n().createElement(y.Button,{isInline:!0,"aria-label":"arrow-right-button","data-testid":"versions-route-link",variant:"link",icon:n().createElement(M.fl,null),iconPosition:"right",onClick:()=>{r&&s.trim()!==a&&r(s.trim())}})))))))},F=({getRedirectPath:e,searchTerm:t,onSearch:a,onClearSearch:r,isPrimary:o})=>{const i=(0,l.useNavigate)(),c=(0,l.useParams)(),s=(0,x.Ny)(c);return n().createElement(B,{sourceId:s.sourceId??"",onSelection:t=>{t!==s.sourceId&&i(e(t||""))},searchTerm:t,onSearch:a,onClearSearch:r,primary:o})},z=({title:e,sourceId:t})=>n().createElement(N.A,{title:e||"Source not found",bodyText:(t?`Catalog source ${t}`:"The catalog source")+" was not found"},n().createElement(F,{getRedirectPath:e=>v(e),isPrimary:!0})),G=({getInvalidRedirectPath:e})=>{const{sourceId:t}=(0,l.useParams)(),{catalogSources:a,catalogSourcesLoaded:n,catalogSourcesLoadError:o,selectedSource:i,updateSelectedSource:c}=r.useContext(C),{isMUITheme:s}=(0,f.w)(),m=a?.items.find(e=>e.id===t);if(r.useEffect(()=>{m&&!i&&c(m)},[m,c,i]),o)return r.createElement(y.Bullseye,null,r.createElement(y.Alert,{title:"Model catalog source load error",variant:"danger",isInline:!0},o.message));if(!n)return r.createElement(S.A,{title:r.createElement(k.A,{title:"Model Catalog",objectType:I.Xf.modelCatalog}),description:"Discover models that are available for your organization to register, deploy, and customize.",headerContent:null,empty:!0,emptyStatePage:r.createElement(y.Bullseye,null,"Loading catalog sources..."),loaded:!1});let d;if(0===a?.items.length)d={empty:!0,emptyStatePage:r.createElement(T,{testid:"empty-model-catalog-state",title:s?"Deploy a model catalog":"Request access to model catalog",description:s?"To deploy model catalog, follow the instructions in the docs below.":"To request model catalog, or to request permission to access model catalog, contact your administrator.",headerIcon:()=>r.createElement("img",{src:(0,I.z5)(I.Xf.modelRegistrySettings),alt:""}),customAction:s?r.createElement(L.A,null):r.createElement(P.A,null)}),headerContent:null};else{if(!t){const t=i??a?.items[0];return r.createElement(l.Navigate,{to:e(t?.id||""),replace:!0})}{const e=a?.items.find(e=>e.id===t);if(e)return r.createElement(l.Outlet,null);d={empty:!0,emptyStatePage:r.createElement(z,{sourceId:t})}}}return r.createElement(S.A,{title:r.createElement(k.A,{title:"Model Catalog",objectType:I.Xf.modelCatalog}),description:"Discover models that are available for your organization to register, deploy, and customize.",headerContent:r.createElement(F,{getRedirectPath:e=>v(e)}),...d,loaded:!0,provideChildrenPadding:!0})};var $=a(62127),q=a(88872),V=a(45848),j=a(29653);const U=()=>{const{apiState:e,refreshAPIState:t}=n().useContext(C);return{refreshAllAPI:t,...e}},W=(e,t)=>{const{api:a,apiAvailable:r}=U(),l=n().useCallback(n=>r?e?t?a.getListCatalogModelArtifacts(n,e,t):Promise.reject(new i.r1("No model name")):Promise.reject(new i.r1("No source id")):Promise.reject(new Error("API not yet available")),[a,r,e,t]);return(0,i.vT)(l,{items:[],size:0,pageSize:0,nextPageToken:""},{initialPromisePurity:!0})},_=({tasks:e=[],license:t,provider:a})=>r.createElement(y.LabelGroup,{numLabels:5,isCompact:!0},e.map(e=>r.createElement(y.Label,{"data-testid":"model-catalog-label",key:e,variant:"outline"},e)),t&&r.createElement(y.Label,{color:"purple",isCompact:!0},t),a&&r.createElement(y.Label,{isCompact:!0},a));var O=a(40167);const H=({text:e,to:t,testId:a})=>r.createElement(y.Button,{variant:"link","data-testid":a,isInline:!0,onClick:()=>{window.open(t)},icon:r.createElement(O._,null),iconPosition:"end"},e);var Q=a(90239),X=a(65360),Y=a(93250),J=a(5101),K=a(68444),Z=a(28734),ee=a(97192),te=a(15402),ae=a(36645),re=a(65365),ne=a(69375),le=a(85072),oe=a.n(le),ie=a(97825),ce=a.n(ie),se=a(77659),me=a.n(se),de=a(55056),ue=a.n(de),pe=a(10540),ge=a.n(pe),Ee=a(41113),he=a.n(Ee),Ce=a(61026),Ae={};Ae.styleTagTransform=he(),Ae.setAttributes=ue(),Ae.insert=me().bind(null,"head"),Ae.domAPI=ce(),Ae.insertStyleElement=ge();oe()(Ce.A,Ae);Ce.A&&Ce.A.locals&&Ce.A.locals;const be={1:y.ContentVariants.h1,2:y.ContentVariants.h2,3:y.ContentVariants.h3,4:y.ContentVariants.h4,5:y.ContentVariants.h5,6:y.ContentVariants.h6},ve=(e,t)=>{const a=Math.min(e+t-1,6);return be[a]},ye=({children:e,href:t="#",className:a})=>n().createElement(y.Button,{variant:"link",className:a,isInline:!0,onClick:()=>"#"!==t&&window.open(t,"_blank","noopener,noreferrer")},e);var fe=a(90333),Se=a(89015);const ke=({children:e,summary:t,className:a})=>{const[l,o]=(0,r.useState)(!1),i=t.replace(/\\n/g," ").trim(),c=n().Children.map(e,e=>n().isValidElement(e)&&"code"===e.type?n().createElement(y.CodeBlock,null,n().createElement(y.CodeBlockCode,null,String(e.props.children).replace(/\\n/g,"\n"))):e);return n().createElement("div",{className:a},n().createElement(y.Button,{variant:"link",onClick:()=>o(!l),style:{padding:0,margin:0,textAlign:"left"}},l?n().createElement(fe.RM,null):n().createElement(Se.D0,null)," ",i),l&&n().createElement(y.Content,{style:{marginLeft:"1.5rem",marginTop:"0.5rem"}},c))},Ie=({children:e,className:t})=>n().createElement(y.CodeBlock,{className:t},n().createElement(y.CodeBlockCode,null,e)),Le=({data:e,dataTestId:t,maxHeading:a=1})=>n().createElement("div",{className:"markdown-content","data-testid":t},n().createElement(Q.oz,{components:{p:({children:e,...t})=>n().createElement(y.Content,{component:y.ContentVariants.p,...t},e),a:({children:e,href:t,...a})=>n().createElement(ye,{href:t,...a},e),details:({children:e,...t})=>{const a=n().Children.toArray(e).find(e=>n().isValidElement(e)&&"summary"===e.type),r=n().Children.toArray(e).filter(e=>!(n().isValidElement(e)&&"summary"===e.type));return n().createElement(ke,{summary:a&&n().isValidElement(a)&&"string"==typeof a.props.children?a.props.children:"Details",...t},r)},summary:({children:e,...t})=>n().createElement(y.Content,{...t},e),code:({node:e,className:t,children:a,...r})=>{const l=n().Children.toArray(a).map(e=>"string"==typeof e?e:"").join("").replace(/\n$/,"");if(!e)return n().createElement("code",{className:t,...r},a);return"tagName"in e&&"pre"===e.tagName?n().createElement(Ie,{...r},l):n().createElement("code",{className:t,...r},a)},h1:({children:e,...t})=>n().createElement(y.Content,{component:ve(1,a),...t},e),h2:({children:e,...t})=>n().createElement(y.Content,{component:ve(2,a),...t},e),h3:({children:e,...t})=>n().createElement(y.Content,{component:ve(3,a),...t},e),h4:({children:e,...t})=>n().createElement(y.Content,{component:ve(4,a),...t},e),h5:({children:e,...t})=>n().createElement(y.Content,{component:ve(5,a),...t},e),h6:({children:e,...t})=>n().createElement(y.Content,{component:ve(6,a),...t},e),blockquote:({children:e,...t})=>n().createElement(y.Content,{component:y.ContentVariants.blockquote,...t},e),ul:({children:e,...t})=>n().createElement(y.List,{component:"ul",...t},e),ol:({children:e,...t})=>{const{type:a,...r}=t;return n().createElement(y.List,{component:"ol",...r},e)},li:({children:e,...t})=>n().createElement(y.ListItem,{...t},e),table:({children:e,...t})=>n().createElement(Z.X,{...t},e),tbody:({children:e,...t})=>n().createElement(ee.N,{...t},e),thead:({children:e,...t})=>n().createElement(te.d,{...t},e),tr:({children:e,...t})=>n().createElement(ae.Tr,{...t},e),td:({children:e,...t})=>{const{width:a,...r}=t;return n().createElement(re.Td,{...r},e)},th:({children:e,...t})=>n().createElement(ne.Th,{...t},e),img:({src:e,alt:t,...a})=>e?n().createElement("img",{src:e,alt:t||"Model documentation image",...a}):null},rehypePlugins:[K.A,X.A,J.A],remarkPlugins:[Y.A]},e));var Pe=a(11653);const we=({model:e,decodedParams:t})=>{const[a,n,l]=W(t.sourceId||"",encodeURIComponent(`${t.modelName}`));return r.createElement(y.PageSection,{hasBodyWrapper:!1,isFilled:!0},r.createElement(y.Sidebar,{hasBorder:!0,hasGutter:!0,isPanelRight:!0},r.createElement(y.SidebarContent,null,r.createElement(y.Content,null,r.createElement("h2",null,"Description"),r.createElement("p",{"data-testid":"model-long-description"},e.description||"No description"),r.createElement("h2",null,"Model card"),!e.readme&&r.createElement("p",{className:j.A.textColorDisabled},"No model card")),e.readme&&r.createElement(Le,{data:e.readme,dataTestId:"model-card-markdown",maxHeading:3})),r.createElement(y.SidebarPanel,null,r.createElement(y.DescriptionList,{isFillColumns:!0},r.createElement(y.DescriptionListGroup,null,r.createElement(y.DescriptionListTerm,null,"Labels"),r.createElement(y.DescriptionListDescription,null,r.createElement(_,{tasks:e.tasks??[],license:e.license}))),r.createElement(y.DescriptionListGroup,null,r.createElement(y.DescriptionListTerm,null,"License"),r.createElement(H,{text:"Agreement",to:e.licenseLink||"",testId:"model-license-link"})),r.createElement(y.DescriptionListGroup,null,r.createElement(y.DescriptionListTerm,null,"Provider"),r.createElement(y.DescriptionListDescription,null,e.provider||"N/A")),r.createElement(y.DescriptionListGroup,null,r.createElement(y.DescriptionListTerm,null,"Model location"),l?r.createElement(y.Alert,{variant:"danger",isInline:!0,title:l.name},l.message):n?a.items.length>0?r.createElement(V.A,{testId:"source-image-location",textToCopy:a.items.map(e=>e.uri)[0]||""}):r.createElement("p",{className:j.A.textColorDisabled},"No artifacts available"):r.createElement(y.Spinner,{size:"sm"})),r.createElement(y.DescriptionListGroup,null,r.createElement(y.DescriptionListTerm,null,"Last modified"),r.createElement(y.DescriptionListDescription,null,r.createElement(y.Icon,{isInline:!0,style:{marginRight:4}},r.createElement(q.Y8,null)),r.createElement(Pe.A,{timeSinceEpoch:e.lastUpdateTimeSinceEpoch}))),r.createElement(y.DescriptionListGroup,null,r.createElement(y.DescriptionListTerm,null,"Published"),r.createElement(y.DescriptionListDescription,null,r.createElement(y.Icon,{isInline:!0,style:{marginRight:4}},r.createElement(q.Y8,null)),r.createElement(Pe.A,{timeSinceEpoch:e.createTimeSinceEpoch})))))))},Te=(e,t)=>{const{api:a,apiAvailable:r}=U(),l=n().useCallback(n=>r?e?t?a.getCatalogModel(n,e,t):Promise.reject(new i.r1("No model name")):Promise.reject(new i.r1("No source id")):Promise.reject(new Error("API not yet available")),[a,r,e,t]);return(0,i.vT)(l,null,{initialPromisePurity:!0})};var Ne=a(68591);var xe=a(2358),Re=a(92314),Me=a(11159);const De=({model:e,render:t})=>{const a=(0,l.useNavigate)(),[r,o]=(0,xe.useResolvedExtensions)(Re.s),[i,c]=n().useState(!1),[s,m]=n().useState([]),d=(0,Me.Hr)(s,!0),u=n().useCallback(()=>{c(!0)},[c]),p=n().useMemo(()=>o&&r.length>0,[o,r]),g=(0,l.useParams)(),E=(0,x.Ny)(g),[h,C,A]=W(E.sourceId||"",encodeURIComponent(`${E.modelName}`)),b=h.items[0].uri,v=p&&C&&!A,y=n().useMemo(()=>({data:{modelName:e.name,modelArtifactUri:b,connectionTypeName:b?.includes("oci://")?"oci":"s3"},loaded:!0,error:void 0}),[e]),f=n().useCallback(()=>{c(!1),a("/modelServing")},[a]);return n().createElement(n().Fragment,null,r.map(e=>e.properties.useAvailablePlatformIds&&n().createElement(xe.HookNotify,{key:e.uid,useHook:e.properties.useAvailablePlatformIds,onNotify:e=>m(e??[])})),t(d,u,v),i&&r.map(e=>e.properties.modalComponent&&n().createElement(e.properties.modalComponent,{key:e.uid,modelDeployPrefill:y,onSubmit:f,onClose:()=>c(!1)})))},Be=({model:e,renderRegisterButton:t})=>n().createElement(De,{model:e,render:(e,a,r)=>{const l=n().createElement(y.Button,{id:"deploy-button","aria-label":"Deploy model",variant:y.ButtonVariant.primary,onClick:e?.enabled?a:void 0,isAriaDisabled:!e?.enabled,"data-testid":"deploy-button"},"Deploy model"),o=r?e.tooltip?n().createElement(y.Tooltip,{content:e.tooltip},l):l:null;return n().createElement(n().Fragment,null,o,t?.(r))}}),Fe=()=>{const e=(0,$.useParams)(),t=(0,x.Ny)(e),a=(0,$.useNavigate)(),r=Te(t.sourceId||"",encodeURIComponent(`${t.modelName}`)),[o,i,c]=r,{modelRegistries:s,modelRegistriesLoadError:m,modelRegistriesLoaded:d}=n().useContext(Ne.j),[u,p,g]=W(t.sourceId||"",encodeURIComponent(encodeURIComponent(`${t.modelName}`))||""),E=(e,t,a="primary")=>n().createElement(y.Popover,{headerContent:e,triggerAction:"hover","data-testid":"register-catalog-model-popover",bodyContent:n().createElement("div",null,t)},n().createElement(y.Button,{variant:a,isAriaDisabled:!0,"data-testid":"register-model-button"},"Register model")),h=(e="primary")=>!d||m||!p||g?null:0===s.length?E("Request access to a model registry","To request a new model registry, or to request permission to access an existing model registry, contact your administrator.",e):0===u.items.length?E("","Model location is unavailable",e):n().createElement(y.Button,{"data-testid":"register-model-button",variant:e,onClick:()=>{a(((e="",t="")=>{const{sourceId:a="",modelName:r=""}=(0,x.hm)({sourceId:e,modelName:t});return`/model-catalog/${a}/${r}/register`||"#"})(t.sourceId,t.modelName))}},"Register model");return n().createElement(S.A,{breadcrumb:n().createElement(y.Breadcrumb,null,n().createElement(y.BreadcrumbItem,null,n().createElement(l.Link,{to:"/model-catalog"},"Model catalog")),n().createElement(y.BreadcrumbItem,{isActive:!0},(0,x.Lm)(o?.name||"")||"Details")),title:o?n().createElement(y.Flex,{spaceItems:{default:"spaceItemsMd"},alignItems:{default:"alignItemsCenter"}},o.logo?n().createElement("img",{src:o.logo,alt:"model logo",style:{height:"56px",width:"56px"}}):n().createElement(y.Skeleton,{shape:"square",width:"56px",height:"56px",screenreaderText:"Brand image loading"}),n().createElement(y.Stack,null,n().createElement(y.StackItem,null,n().createElement(y.Flex,{spaceItems:{default:"spaceItemsSm"},alignItems:{default:"alignItemsCenter"}},n().createElement(y.FlexItem,null,(0,x.Lm)(o.name)))),n().createElement(y.StackItem,null,n().createElement(y.Content,{component:y.ContentVariants.small},"Provided by ",o.provider)))):"Model details",empty:!o,emptyStatePage:o?void 0:n().createElement("div",null,"Details not found. Return to ",n().createElement(l.Link,{to:"/model-catalog"},"Model catalog")),loadError:c,loaded:i,errorMessage:"Unable to load model catalog",provideChildrenPadding:!0,headerAction:i&&!c&&o&&n().createElement(y.ActionList,null,n().createElement(y.ActionListGroup,null,n().createElement(Be,{model:o,renderRegisterButton:e=>h(e?"secondary":"primary")})))},o&&n().createElement(we,{model:o,decodedParams:t}))};var ze=a(98112),Ge=a(77353),$e=a(24828),qe=a(32853),Ve=a(41215),je=a(87731),Ue=a(60822),We=a(44352),_e=a(98547),Oe=a(36842),He=a(83262),Qe=a(46103),Xe=a(10385);const Ye=({model:e,preferredModelRegistry:t,artifacts:a,decodedParams:r,removeChildrenTopPadding:o})=>{const i=(0,l.useNavigate)(),{apiState:c}=n().useContext(ze.m),[s,m]=(0,_e.A)(),d=(0,Oe.A)(),[u,p]=n().useState(!1),[g,E]=n().useState(void 0),h=(0,Xe.yQ)(r),C=(0,Xe.VU)(e),A=a[0]?a[0].uri:"",v={modelName:(0,x.Lm)(r.modelName||""),modelDescription:e?.description||"",versionName:"Version 1",versionDescription:"",sourceModelFormat:"",sourceModelFormatVersion:"",modelLocationType:Ge.Ht.URI,modelLocationEndpoint:"",modelLocationBucket:"",modelLocationRegion:"",modelLocationPath:"",modelLocationURI:A||"",modelRegistry:t.name,modelCustomProperties:{...(0,Xe.Wp)(e?.customProperties),...C},versionCustomProperties:{...e?.customProperties,License:{string_value:e?.licenseLink||"",metadataType:We.u.STRING},Provider:{string_value:e?.provider??"",metadataType:We.u.STRING},...C},additionalArtifactProperties:h},[f,S]=(0,Ge.Bc)(v),[k,I]=n().useState(""),[L,P]=n().useState(""),[w,T]=n().useState(void 0),N=(0,qe.wJ)(f.modelName),R=!!m&&(0,qe.oV)(f.modelName,s),M=!N||R,D=u||(0,qe.S4)(f,s);return n().createElement(n().Fragment,null,n().createElement(y.PageSection,{hasBodyWrapper:!1,style:o?{paddingTop:0}:void 0,isFilled:!0},n().createElement(y.Form,{isWidthLimited:!0},n().createElement(y.Stack,{hasGutter:!0},n().createElement(y.StackItem,null,n().createElement(y.FormGroup,{id:"model-registry-container",label:"Model registry",isRequired:!0,fieldId:"model-registry-name"},n().createElement(He.A,{modelRegistry:f.modelRegistry,onSelection:e=>S("modelRegistry",e),primary:!0,isFullWidth:!0,hasError:!1}))),n().createElement(y.StackItem,null,n().createElement(y.Alert,{variant:"info",isInline:!0,isPlain:!0,title:"Additional model metadata, such as labels, provider, and license, will be available to view and edit after registration is complete."})),n().createElement(y.StackItem,null,n().createElement(je.A,{formData:f,setData:S,hasModelNameError:M,isModelNameDuplicate:R}),n().createElement($e.A,{formData:f,setData:S,isFirstVersion:!1,isCatalogModel:!0}))))),n().createElement(Ue.A,{submitLabel:Ve.Fu.REGISTER_MODEL,submitError:g,isSubmitDisabled:D,isSubmitting:u,onSubmit:async()=>{if(p(!0),E(void 0),!f.modelLocationURI||""===f.modelLocationURI.trim())return E(new Error("Model location URI is required")),void p(!1);if(!c.api)return E(new Error("Model registry API is not available")),void p(!1);try{const{data:{registeredModel:e,modelVersion:a,modelArtifact:r},errors:n}=await(0,qe.$R)(c,f,d.userId||"user");if(e&&a&&r){const a=(0,Qe.Pc)(e.id,t.name);i(a)}else if(Object.keys(n).length>0){p(!1),I(f.modelName),P(f.versionName);const e=Object.keys(n)[0];T(e),E(n[e])}}catch(e){E(e instanceof Error?e:new Error("Registration failed")),p(!1)}},onCancel:()=>{i((0,b.S)({sourceId:r.sourceId,modelName:r.modelName}))},registrationErrorType:w,versionName:L,modelName:k}))},Je=()=>{const e=(0,l.useParams)(),t=(0,x.Ny)(e),{modelRegistries:a,modelRegistriesLoaded:n}=r.useContext(Ne.j),o=Te(t.sourceId||"",encodeURIComponent(`${t.modelName}`)),[i,c,s]=o,[m,d,u]=W(t.sourceId||"",encodeURIComponent(`${t.modelName}`)),p=a.length>0?a[0]:null,g=c&&d&&!u&&!s&&i&&n&&a.length>0;return r.createElement(S.A,{title:`Register ${(0,x.Lm)(i?.name||"")||""} model`,description:"Create and register the first version of a new model.",breadcrumb:r.createElement(y.Breadcrumb,null,r.createElement(y.BreadcrumbItem,{render:()=>r.createElement(l.Link,{to:"/model-catalog"},"Model catalog")}),r.createElement(y.BreadcrumbItem,{"data-testid":"breadcrumb-model-name",render:()=>i?.name?r.createElement(l.Link,{to:(0,b.S)({sourceId:t.sourceId,modelName:t.modelName})},(0,x.Lm)(i.name)):"Loading..."}),r.createElement(y.BreadcrumbItem,{"data-testid":"breadcrumb-version-name",isActive:!0},"Register model")),loaded:c,loadError:s,empty:!1},g&&p?r.createElement(ze.T,{modelRegistryName:p.name},r.createElement(Ye,{model:i,preferredModelRegistry:p,artifacts:m.items,decodedParams:t,removeChildrenTopPadding:!0})):r.createElement("div",null,"Loading..."))},Ke=()=>r.createElement(Ne.E,null,r.createElement(Je,null)),Ze=({shouldScroll:e})=>{const t=r.useRef(null);return r.useEffect(()=>{e&&t.current&&t.current.scrollIntoView()},[e]),r.createElement("div",{ref:t})};var et=a(57691);const tt=({model:e,source:t,truncate:a=!1})=>{const r=(0,l.useNavigate)();return n().createElement(y.Card,{isFullHeight:!0,"data-testid":"model-catalog-card",key:`${e.name}/${e.source_id}`},n().createElement(y.CardHeader,null,n().createElement(y.CardTitle,null,n().createElement(y.Flex,{alignItems:{default:"alignItemsCenter"}},e.logo?n().createElement("img",{src:e.logo,alt:"model logo",style:{height:"56px",width:"56px"}}):n().createElement(y.Skeleton,{shape:"square",width:"56px",height:"56px",screenreaderText:"Brand image loading"}),n().createElement(y.FlexItem,{align:{default:"alignRight"}},t&&n().createElement(y.Label,null,t.name))))),n().createElement(y.CardBody,null,n().createElement(y.Stack,{hasGutter:!0},n().createElement(y.StackItem,{isFilled:!0},n().createElement(y.Button,{"data-testid":"model-catalog-detail-link",variant:"link",isInline:!0,component:"a",onClick:()=>{r(((e="",t="")=>(0,b.S)({sourceId:t,modelName:e}))(e.name,t?.id))},style:{fontSize:"var(--pf-t--global--font--size--body--default)",fontWeight:"var(--pf-t--global--font--weight--body--bold)"}},a?n().createElement(y.Truncate,{"data-testid":"model-catalog-card-name",content:e.name,position:"middle",tooltipPosition:"top",style:{textDecoration:"underline"}}):n().createElement("span",null,(0,x.Lm)(e.name)))),n().createElement(y.StackItem,{isFilled:!0,"data-testid":"model-catalog-card-description"},a?n().createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:4,WebkitBoxOrient:"vertical",display:"-webkit-box"}},e.description):e.description))),n().createElement(y.CardFooter,null,n().createElement(_,{tasks:e.tasks??[],license:e.license,provider:e.provider})))},at=({searchTerm:e})=>{const{selectedSource:t}=n().useContext(C),[a,r,l,o]=((e,t=10,a="")=>{const{api:r,apiAvailable:l}=U(),[o,c]=n().useState({items:[],nextPageToken:"",totalSize:0,isLoading:!1,isLoadingMore:!1,loaded:!1,error:void 0}),s=n().useCallback(async n=>{const o=Boolean(n);c(e=>({...e,isLoading:!o,isLoadingMore:o}));try{if(!l)return await Promise.reject(new Error("API not yet available"));if(!e)return await Promise.reject(new i.r1("No source id"));const s=await r.getCatalogModelsBySource({},e,{pageSize:t.toString(),...n&&{nextPageToken:n}},a&&a.trim()?a.trim():void 0);c(e=>({items:o?[...e.items,...s.items]:s.items,nextPageToken:s.nextPageToken,totalSize:s.size,isLoading:!1,isLoadingMore:!1,loaded:!0,error:void 0}))}catch(e){c(t=>({...t,isLoading:!1,isLoadingMore:!1,loaded:!0,error:new Error(`Failed to load models ${e instanceof Error?e.message:String(e)}`)}))}},[r,e,t,l,a]);n().useEffect(()=>{s()},[s]);const m=n().useCallback(()=>{o.nextPageToken&&!o.isLoadingMore&&s(o.nextPageToken)},[s,o.nextPageToken,o.isLoadingMore]),d=n().useCallback(()=>{c(e=>({...e,items:[],nextPageToken:""})),s()},[s]);return[{items:o.items,size:o.totalSize,pageSize:10,nextPageToken:o.nextPageToken,loadMore:m,isLoadingMore:o.isLoadingMore,hasMore:Boolean(o.nextPageToken)},o.loaded,o.error,d]})(t?.id||"",10,e);return r?l?n().createElement(y.Alert,{variant:"danger",title:"Failed to load model catalog",isInline:!0},l.message,n().createElement(y.Button,{variant:"link",onClick:o},"Try again")):0===a.items.length?n().createElement(T,{testid:"empty-model-catalog-state",title:"No result found",headerIcon:et.WI,description:n().createElement(n().Fragment,null,"No models from the ",n().createElement("b",null,t?.name)," source match the search criteria. Adjust your search, or select a different source")}):n().createElement(n().Fragment,null,n().createElement(y.Gallery,{hasGutter:!0,minWidths:{default:"300px"}},a.items.map(e=>n().createElement(tt,{model:e,source:t,key:`${e.name}/${e.source_id}`}))),a.hasMore&&n().createElement("div",{style:{marginTop:"2rem"}},n().createElement(y.Bullseye,null,a.isLoadingMore?n().createElement(n().Fragment,null,n().createElement(y.Spinner,{size:"lg",className:"pf-v5-u-mb-md"}),n().createElement(y.Title,{size:"lg",headingLevel:"h5"},"Loading more catalog models...")):n().createElement(y.Button,{variant:"tertiary",onClick:a.loadMore,size:"lg"},"Load more models")))):n().createElement(y.EmptyState,null,n().createElement(y.Spinner,null),n().createElement(y.Title,{headingLevel:"h4",size:"lg"},"Loading model catalog..."))},rt=()=>{const[e,t]=r.useState(""),a=r.useCallback(e=>{t(e)},[]),n=r.useCallback(()=>{t("")},[]);return r.createElement(r.Fragment,null,r.createElement(Ze,{shouldScroll:!0}),r.createElement(S.A,{title:r.createElement(k.A,{title:"Model Catalog",objectType:I.Xf.modelCatalog}),description:"Discover models that are available for your organization to register, deploy, and customize.",empty:!1,headerContent:r.createElement(F,{getRedirectPath:e=>v(e),searchTerm:e,onSearch:a,onClearSearch:n}),loaded:!0,provideChildrenPadding:!0},r.createElement(y.PageSection,{isFilled:!0},r.createElement(at,{searchTerm:e}))))},nt=()=>r.createElement(A,null,r.createElement(l.Routes,null,r.createElement(l.Route,{path:"/:sourceId?/*",element:r.createElement(G,{getInvalidRedirectPath:e=>v(e)})},r.createElement(l.Route,{index:!0,element:r.createElement(rt,null)}),r.createElement(l.Route,{path:":modelName"},r.createElement(l.Route,{index:!0,element:r.createElement(Fe,null)}),r.createElement(l.Route,{path:"register",element:r.createElement(Ke,null)}),r.createElement(l.Route,{path:"*",element:r.createElement(l.Navigate,{to:"."})})),r.createElement(l.Route,{path:"*",element:r.createElement(l.Navigate,{to:"."})}))))}}]);
//# sourceMappingURL=180.bundle.js.map